<div class="main">

    <div class="left" *ngIf="dataset">

        <div class="greybox-left marginBottom textBox">
            <div class="topicHead">Region of interest</div>
                <div style="height: 300px;"
                    leaflet
                    [leafletOptions]="options"
                    [leafletLayers]="layers">
                </div>
        </div>

        <div class="greybox-left marginBottom textBox">
            <div class="topicHead">Dataset metric</div>
            <div style="height: 40px">
                <a>... </a> 
            </div>
        </div>

        <div class="greybox-left marginBottom textBox">
            <div class="topicHead">Other datasets from same authors</div>
                <div *ngFor="let dataset of others_datasets; let i = index">
                        <div *ngIf="i<11">
                        <a class="textlink itemLine" [routerLink]="['/datasets', others_datasets[i].id]">{{others_datasets[i].author[1].split(" ")[0]}} et al. ({{others_datasets[i].year}}): {{others_datasets[i].title | slice:0:18}}... </a>
                    </div>
                </div>

            </div>

            <div class="greybox-left marginBottom textBox">
                <div class="topicHead">Cite as</div>

                <div class="textCite"> 
                    <a *ngFor="let user of users; let i = index">
                            <a class="spacetext">{{users[i]}}</a> 
                            <a *ngIf="i != users.length-1 && i != users.length-2 ">, </a> 
                            <a *ngIf="i == users.length-2">; </a>
                    </a>
                            ({{dataset.year}}): {{dataset.title}}. Terrabrasilis Research Data. http://tbrd.dpi.inpe.br/LABTes/1
                </div>
                
            </div>

            <div class="greybox-left marginBottom textBox">
                <div class="topicHead">Export</div>

                <div class="textlink" (click)="CopyBibTex()">BibTeX</div>
                
            </div>

    </div>
    <div *ngIf="dataset" class="right">

        <div class="greybox-right">

            <div class="publishIn">Published: {{dataset.created_on | slice:5:17}} | 
                
                <a class="textlink" href="#">{{categories[0]}}</a>
                    
            </div> 

            <div class="title">{{dataset.title}}</div> 

            <div class="author"> 
                <a *ngFor="let user of users; let i = index">
                    <a class="textlink spacetext" href="#">{{users[i]}}</a> 
                    <a *ngIf="i != users.length-1 && i != users.length-2 ">, </a> 
                    <a *ngIf="i == users.length-2"> & </a>
                </a>
            </div>
            
            <div class="abstract">
                <div class="header"> Abstract </div>
                <div class="textAbstract"> 
                        {{dataset.abstract}}
                </div>
            </div>

            <div class="repoContent">
                    <mat-accordion>
                            <mat-expansion-panel [expanded]="true">
                              <mat-expansion-panel-header>
                                <mat-panel-title>
                                Files
                                </mat-panel-title>
                                <mat-panel-description>
                                </mat-panel-description>
                              </mat-expansion-panel-header>

                              <table class="table table-striped topMargin vertical">
                                    <thead>
                                    <tr>
                                      <th scope="col">Name</th>
                                      <th scope="col">Size</th>
                                      <th scope="col">Published on</th>
                                      <th scope="col"></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngFor="let data of data_objects; index as i">
                                    
                                    <td> 
                                    <div>
                                            
                                                    <i class="material-icons sizeIcon">
                                                        description
                                                    </i>
        
                                                {{data.name}}
                                    </div>

                                    </td>
                                      <td>{{data.size}}</td>
                                      <td>{{data.created_on | slice:5:17}}</td>
                                      <td>
                                            <a routerLink="/" class="btn button">Download</a>
                                            
                                      </td>
                                    </tr>
                                    </tbody>
                                  </table>

                            </mat-expansion-panel>

                            <mat-expansion-panel>
                              <mat-expansion-panel-header>
                                <mat-panel-title>
                                  Metadata
                                </mat-panel-title>
                                <mat-panel-description>
                                </mat-panel-description>
                              </mat-expansion-panel-header>

                              <div class="ftextMetadata"> <a class="metadataTopic">Dataset ID:</a> {{dataset.id}}</div> 
                              
                              <div class="textMetadata"> <a class="metadataTopic">Publication Date:</a> {{dataset.created_on | slice:5:17}}</div> 
                              
                              <div class="textMetadata"> <a class="metadataTopic">Title: </a> {{dataset.title}}</div> 

                              <div class="textMetadata"> <a class="metadataTopic">Author(s): </a> 

                                    <a *ngFor="let user of users; let i = index">
                                        <a class="spacetext">{{users[i]}}</a> 
                                        <a *ngIf="i != users.length-1 && i != users.length-2 ">, </a> 
                                        <a *ngIf="i == users.length-2"> & </a>
                                    </a>
                              </div> 
                              
                              <div class="textMetadata"> <a class="metadataTopic">License: </a> {{dataset.license}}</div> 

                              <div class="textMetadata"> <a class="metadataTopic">Contact: </a> {{dataset.contact_email}}</div> 

                              <div class="textMetadata"> <a class="metadataTopic">Categorie: </a> 

                                <a *ngFor="let categorie of categories; let i = index">
                                        <a class="spacetext">{{categories[i]}}</a> 
                                        <a *ngIf="i != categories.length-1 && i != categories.length-2 ">, </a> 
                                        <a *ngIf="i == categories.length-2"> & </a>
                                    </a>
                             </div> 

                             <div class="textMetadata"> <a class="metadataTopic">Coverage: </a> South-bound Latitude: 0.0 West-bound Longitude: 0.0 North-bound Latitude: 0.0 East-bound Longitude: 0.0 </div> 

                             <div class="textMetadata"> <a class="metadataTopic">Contact: </a> {{dataset.language}}</div> 

                             <div class="textMetadata"> <a class="metadataTopic">Maintainer: </a> {{dataset.maintainer}}</div> 

                            </mat-expansion-panel>

                            <mat-expansion-panel>
                                <mat-expansion-panel-header>
                                  <mat-panel-title>
                                    Visualization
                                  </mat-panel-title>
                                  <mat-panel-description>
                                  </mat-panel-description>
                                </mat-expansion-panel-header>

                                <app-data-map></app-data-map>

                              </mat-expansion-panel>

                          </mat-accordion>

            <div class="header"> Comments </div> 
            
            <textarea style=" margin-top: 7px;" [(ngModel)]="text" cols="40" rows="4" placeholder="Add a public comment ..."></textarea>
            <br>

            <button (click)="addComment(comment)" style=" margin-top: 7px; margin-bottom: 20px;" class="btn button">Comment</button>

            <comment-tree [comments]="comments">  
            </comment-tree>

           
        </div>
            <div style="margin-bottom: 300px">
            </div>

        </div>

    </div>
</div>